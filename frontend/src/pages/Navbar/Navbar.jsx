import React, { useEffect, useState } from "react";
import Logo from "../../components/ui/Logo";
import axios from "axios";
import { useAuth } from "../../contexts/authenContext";
import { useNavigate } from "react-router-dom";

const icon1 = (
  <svg
    width="16"
    height="17"
    viewBox="0 0 16 17"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M5.00039 4.5C5.00039 3.70435 5.31646 2.94129 5.87907 2.37868C6.44168 1.81607 7.20474 1.5 8.00039 1.5C8.79604 1.5 9.5591 1.81607 10.1217 2.37868C10.6843 2.94129 11.0004 3.70435 11.0004 4.5C11.0004 5.29565 10.6843 6.05871 10.1217 6.62132C9.5591 7.18393 8.79604 7.5 8.00039 7.5C7.20474 7.5 6.44168 7.18393 5.87907 6.62132C5.31646 6.05871 5.00039 5.29565 5.00039 4.5ZM2.50106 13.9033C2.52354 12.4596 3.11282 11.0827 4.1417 10.0697C5.17058 9.05674 6.55653 8.48897 8.00039 8.48897C9.44425 8.48897 10.8302 9.05674 11.8591 10.0697C12.888 11.0827 13.4772 12.4596 13.4997 13.9033C13.5015 14.0005 13.4748 14.0961 13.4231 14.1784C13.3713 14.2607 13.2967 14.3261 13.2084 14.3667C11.5745 15.1158 9.79783 15.5024 8.00039 15.5C6.14306 15.5 4.37839 15.0947 2.79239 14.3667C2.70405 14.3261 2.62944 14.2607 2.5777 14.1784C2.52596 14.0961 2.49932 14.0005 2.50106 13.9033Z"
      fill="#FFE1EA"
    />
  </svg>
);

const icon2 = (
  <svg
    width="16"
    height="17"
    viewBox="0 0 16 17"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M7.72201 14.0321L7.71801 14.0297L7.70281 14.0217C7.38712 13.8499 7.07709 13.6679 6.77321 13.476C6.0487 13.0202 5.35834 12.5122 4.70761 11.956C3.23561 10.6864 1.59961 8.78165 1.59961 6.50005C1.59968 5.75562 1.83053 5.02952 2.26037 4.42172C2.69021 3.81393 3.2979 3.35433 3.99977 3.10622C4.70164 2.85811 5.46316 2.83369 6.17949 3.03631C6.89581 3.23894 7.53171 3.65865 7.99961 4.23765C8.46751 3.65865 9.10341 3.23894 9.81973 3.03631C10.5361 2.83369 11.2976 2.85811 11.9994 3.10622C12.7013 3.35433 13.309 3.81393 13.7388 4.42172C14.1687 5.02952 14.3995 5.75562 14.3996 6.50005C14.3996 8.78165 12.7644 10.6864 11.2916 11.956C10.3671 12.746 9.36334 13.4382 8.29641 14.0217L8.28121 14.0297L8.27721 14.0321H8.27561C8.19061 14.0771 8.0959 14.1007 7.99971 14.1008C7.90352 14.101 7.80874 14.0776 7.72361 14.0329L7.72201 14.0321Z"
      fill="#FFE1EA"
    />
  </svg>
);

const icon3 = (
  <svg
    width="16"
    height="17"
    viewBox="0 0 16 17"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M8.252 1.56803C8.17552 1.5234 8.08855 1.49988 8 1.49988C7.91145 1.49988 7.82448 1.5234 7.748 1.56803L2 4.92136L8 8.42136L14 4.92136L8.252 1.56803ZM14.5 5.78669L8.5 9.28669V15.2867L14.252 11.932C14.3275 11.888 14.3901 11.8249 14.4336 11.7491C14.4771 11.6733 14.5 11.5874 14.5 11.5V5.78669ZM7.5 15.2867V9.28669L1.5 5.78669V11.5C1.49997 11.5874 1.52286 11.6733 1.56637 11.7491C1.60989 11.8249 1.67251 11.888 1.748 11.932L7.5 15.2874V15.2867Z"
      fill="#FFE1EA"
    />
  </svg>
);

const icon4 = (
  <svg
    width="16"
    height="17"
    viewBox="0 0 16 17"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M6.78806 2.49598C7.32646 1.56238 8.67366 1.56238 9.21206 2.49598L14.2361 11.196C14.7745 12.1296 14.1001 13.296 13.0233 13.296H2.97606C1.89846 13.296 1.22486 12.1296 1.76406 11.196L6.78806 2.49598ZM8.00006 4.49998C8.15919 4.49998 8.3118 4.56319 8.42433 4.67571C8.53685 4.78823 8.60006 4.94085 8.60006 5.09998V7.89998C8.60006 8.05911 8.53685 8.21172 8.42433 8.32424C8.3118 8.43676 8.15919 8.49998 8.00006 8.49998C7.84093 8.49998 7.68832 8.43676 7.5758 8.32424C7.46328 8.21172 7.40006 8.05911 7.40006 7.89998V5.09998C7.40006 4.94085 7.46328 4.78823 7.5758 4.67571C7.68832 4.56319 7.84093 4.49998 8.00006 4.49998ZM8.00006 11.7C8.21223 11.7 8.41572 11.6157 8.56575 11.4657C8.71578 11.3156 8.80006 11.1121 8.80006 10.9C8.80006 10.6878 8.71578 10.4843 8.56575 10.3343C8.41572 10.1843 8.21223 10.1 8.00006 10.1C7.78789 10.1 7.58441 10.1843 7.43438 10.3343C7.28435 10.4843 7.20006 10.6878 7.20006 10.9C7.20006 11.1121 7.28435 11.3156 7.43438 11.4657C7.58441 11.6157 7.78789 11.7 8.00006 11.7Z"
      fill="#FFE1EA"
    />
  </svg>
);

const logoutIcon = (
  <svg
    width="16"
    height="17"
    viewBox="0 0 16 17"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M8.66667 11.1665V11.8332C8.66667 12.3636 8.45595 12.8723 8.08088 13.2474C7.70581 13.6225 7.1971 13.8332 6.66667 13.8332H4C3.46957 13.8332 2.96086 13.6225 2.58579 13.2474C2.21071 12.8723 2 12.3636 2 11.8332V5.1665C2 4.63607 2.21071 4.12736 2.58579 3.75229C2.96086 3.37722 3.46957 3.1665 4 3.1665H6.66667C7.1971 3.1665 7.70581 3.37722 8.08088 3.75229C8.45595 4.12736 8.66667 4.63607 8.66667 5.1665V5.83317M11.3333 11.1665L14 8.49984L11.3333 11.1665ZM14 8.49984L11.3333 5.83317L14 8.49984ZM14 8.49984H4.66667H14Z"
      stroke="#646D89"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
  </svg>
);

const star = (
  <svg
    width="17"
    height="17"
    viewBox="0 0 17 17"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    className="mr-2"
  >
    <path
      d="M13.2844 1.94317C13.2477 1.76232 13.1495 1.59973 13.0067 1.48295C12.8638 1.36617 12.6849 1.30237 12.5004 1.30237C12.3158 1.30237 12.137 1.36617 11.9941 1.48295C11.8512 1.59973 11.7531 1.76232 11.7164 1.94317L11.5244 2.89677C11.4935 3.05167 11.4175 3.19397 11.3059 3.30573C11.1942 3.41748 11.052 3.4937 10.8972 3.52477L9.94358 3.71517C9.76187 3.75111 9.59825 3.84899 9.48066 3.99211C9.36307 4.13524 9.29879 4.31473 9.29879 4.49997C9.29879 4.68521 9.36307 4.8647 9.48066 5.00783C9.59825 5.15095 9.76187 5.24883 9.94358 5.28477L10.8972 5.47517C11.0522 5.5061 11.1946 5.58225 11.3063 5.69402C11.4181 5.80579 11.4943 5.94816 11.5252 6.10317L11.7156 7.05677C11.7515 7.23849 11.8494 7.4021 11.9925 7.51969C12.1357 7.63728 12.3151 7.70156 12.5004 7.70156C12.6856 7.70156 12.8651 7.63728 13.0082 7.51969C13.1514 7.4021 13.2492 7.23849 13.2852 7.05677L13.4756 6.10317C13.5065 5.94816 13.5827 5.80579 13.6944 5.69402C13.8062 5.58225 13.9486 5.5061 14.1036 5.47517L15.0572 5.28477C15.2389 5.24883 15.4025 5.15095 15.5201 5.00783C15.6377 4.8647 15.702 4.68521 15.702 4.49997C15.702 4.31473 15.6377 4.13524 15.5201 3.99211C15.4025 3.84899 15.2389 3.75111 15.0572 3.71517L14.1036 3.52477C13.9486 3.49384 13.8062 3.41769 13.6944 3.30592C13.5827 3.19415 13.5065 3.05178 13.4756 2.89677L13.2852 1.94317H13.2844ZM6.05958 5.04717C6.0066 4.8877 5.90475 4.74896 5.76848 4.65063C5.6322 4.55231 5.46843 4.49939 5.30038 4.49939C5.13234 4.49939 4.96856 4.55231 4.83229 4.65063C4.69602 4.74896 4.59416 4.8877 4.54118 5.04717L3.99478 6.68797C3.95552 6.80592 3.88932 6.9131 3.80141 7.001C3.71351 7.0889 3.60633 7.15511 3.48838 7.19437L1.84758 7.74077C1.68811 7.79375 1.54937 7.8956 1.45105 8.03188C1.35272 8.16815 1.2998 8.33193 1.2998 8.49997C1.2998 8.66801 1.35272 8.83179 1.45105 8.96806C1.54937 9.10434 1.68811 9.20619 1.84758 9.25917L3.48838 9.80637C3.60625 9.84555 3.71337 9.91164 3.80127 9.99939C3.88916 10.0872 3.95542 10.1942 3.99478 10.312L4.54118 11.9528C4.59416 12.1122 4.69602 12.251 4.83229 12.3493C4.96856 12.4476 5.13234 12.5005 5.30038 12.5005C5.46843 12.5005 5.6322 12.4476 5.76848 12.3493C5.90475 12.251 6.0066 12.1122 6.05958 11.9528L6.60598 10.312C6.64524 10.194 6.71145 10.0868 6.79935 9.99894C6.88726 9.91104 6.99443 9.84483 7.11238 9.80557L8.75318 9.25917C8.91266 9.20619 9.0514 9.10434 9.14972 8.96806C9.24805 8.83179 9.30096 8.66801 9.30096 8.49997C9.30096 8.33193 9.24805 8.16815 9.14972 8.03188C9.0514 7.8956 8.91266 7.79375 8.75318 7.74077L7.11238 7.19437C6.99443 7.15511 6.88726 7.0889 6.79935 7.001C6.71145 6.9131 6.64524 6.80592 6.60598 6.68797L6.06038 5.04717H6.05958ZM11.6596 11.4472C11.6066 11.2877 11.5048 11.149 11.3685 11.0506C11.2322 10.9523 11.0684 10.8994 10.9004 10.8994C10.7323 10.8994 10.5686 10.9523 10.4323 11.0506C10.296 11.149 10.1942 11.2877 10.1412 11.4472L9.99398 11.888C9.9548 12.0058 9.88872 12.113 9.80096 12.2009C9.7132 12.2887 9.60618 12.355 9.48838 12.3944L9.04758 12.5408C8.88811 12.5938 8.74937 12.6956 8.65104 12.8319C8.55272 12.9682 8.4998 13.1319 8.4998 13.3C8.4998 13.468 8.55272 13.6318 8.65104 13.7681C8.74937 13.9043 8.88811 14.0062 9.04758 14.0592L9.48838 14.2056C9.60633 14.2448 9.71351 14.311 9.80141 14.3989C9.88932 14.4868 9.95552 14.594 9.99478 14.712L10.1412 15.1528C10.1942 15.3122 10.296 15.451 10.4323 15.5493C10.5686 15.6476 10.7323 15.7005 10.9004 15.7005C11.0684 15.7005 11.2322 15.6476 11.3685 15.5493C11.5048 15.451 11.6066 15.3122 11.6596 15.1528L11.8068 14.712C11.846 14.5941 11.912 14.487 11.9998 14.3991C12.0876 14.3112 12.1946 14.2449 12.3124 14.2056L12.7532 14.0592C12.9127 14.0062 13.0514 13.9043 13.1497 13.7681C13.248 13.6318 13.301 13.468 13.301 13.3C13.301 13.1319 13.248 12.9682 13.1497 12.8319C13.0514 12.6956 12.9127 12.5938 12.7532 12.5408L12.3124 12.3936C12.1945 12.3544 12.0874 12.2883 11.9995 12.2005C11.9116 12.1128 11.8453 12.0058 11.806 11.888L11.6596 11.4472Z"
      fill="#F3B984"
    />
  </svg>
);

const notiButton = (
  <svg
    width="48"
    height="48"
    viewBox="0 0 48 48"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <rect width="48" height="48" rx="24" fill="#F6F7FC" />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M17.2497 21C17.2497 19.2098 17.9609 17.4929 19.2268 16.227C20.4926 14.9612 22.2095 14.25 23.9997 14.25C25.7899 14.25 27.5068 14.9612 28.7727 16.227C30.0386 17.4929 30.7497 19.2098 30.7497 21V21.75C30.7497 23.873 31.5497 25.807 32.8677 27.27C32.9498 27.361 33.0084 27.4707 33.0383 27.5896C33.0682 27.7084 33.0685 27.8328 33.0391 27.9518C33.0098 28.0708 32.9518 28.1808 32.8702 28.2722C32.7885 28.3636 32.6857 28.4335 32.5707 28.476C31.0267 29.046 29.4107 29.466 27.7397 29.719C27.7774 30.2331 27.7086 30.7495 27.5377 31.2359C27.3668 31.7222 27.0974 32.1681 26.7464 32.5457C26.3955 32.9233 25.9704 33.2245 25.4978 33.4304C25.0252 33.6364 24.5152 33.7427 23.9997 33.7427C23.4842 33.7427 22.9742 33.6364 22.5016 33.4304C22.029 33.2245 21.604 32.9233 21.253 32.5457C20.9021 32.1681 20.6327 31.7222 20.4618 31.2359C20.2909 30.7495 20.2221 30.2331 20.2597 29.719C18.6114 29.4692 16.9927 29.0524 15.4287 28.475C15.3139 28.4326 15.2111 28.3627 15.1295 28.2715C15.0479 28.1802 14.9898 28.0703 14.9604 27.9515C14.931 27.8326 14.9312 27.7084 14.9609 27.5896C14.9905 27.4708 15.0489 27.3611 15.1307 27.27C16.4975 25.7567 17.2528 23.7892 17.2497 21.75V21ZM21.7517 29.9C21.7389 30.2032 21.7876 30.5058 21.8948 30.7897C22.002 31.0736 22.1655 31.3329 22.3756 31.5519C22.5856 31.771 22.8377 31.9453 23.1168 32.0644C23.3959 32.1835 23.6963 32.2448 23.9997 32.2448C24.3032 32.2448 24.6035 32.1835 24.8826 32.0644C25.1618 31.9453 25.4139 31.771 25.6239 31.5519C25.8339 31.3329 25.9974 31.0736 26.1046 30.7897C26.2119 30.5058 26.2605 30.2032 26.2477 29.9C24.7521 30.0347 23.2474 30.0347 21.7517 29.9Z"
      fill="#FFE1EA"
    />
  </svg>
);
const Navbar = () => {
  const { state, logout, url } = useAuth();
  const navigate = useNavigate();
  const [isLoading, setIsLoading] = useState(null);
  const [clicked, setClicked] = useState(false);
  const [user, setUser] = useState("");
  const fetchData = async () => {
    setIsLoading(true);
    const response = await axios.get(`${url}/user/${state.id}`);
    console.log(state, response);
    setUser(response.data.data.image[0]);
    setIsLoading(false);
  };

  useEffect(() => {
    fetchData();
  }, []);

  return (
    <div className="flex justify-around h-20 items-center shadow-md relative z-10">
      {clicked ? (
        <div className="z-50 flex flex-col w-[200px] h-[260px] p-3 bg-white rounded-xl shadow-2xl border border-pgray-400 shadow-gray-600 absolute right-[14%] top-16">
          <button className="flex items-center justify-center text-sm text-white rounded-full py-2 px-4 mb-2 bg-gradient-to-r from-pred-700 to-ppurple-300">
            {star}More limit Merry!
          </button>
          <div className="text-sm">
            <div className="flex py-2 hover:bg-pgray-200 hover:rounded-xl">
              <div className="ml-2">{icon1}</div>
              <p className="ml-3">Profile</p>
            </div>
            
            <div className="flex py-2 hover:bg-pgray-200 hover:rounded-xl">
              <div className="ml-2">{icon2}</div>
              <p className="ml-3">Merry list</p>
            </div>
            
            <div className="flex py-2 hover:bg-pgray-200 hover:rounded-xl">
              <div className="ml-2">{icon3}</div>
              <p className="ml-3">Merry Membership</p>
            </div>
            
            <div className="flex py-2 hover:bg-pgray-200 hover:rounded-xl">
              <div className="ml-2">{icon4}</div>
              <p className="ml-3">Complaint</p>
            </div>
          </div>
          <hr className="mt-3" />
          <div onClick={() => logout()} className="flex py-2 mt-1 items-center cursor-pointer hover:bg-pgray-200 hover:rounded-xl">
              <div className="ml-2">{logoutIcon}</div>
              <p className="ml-3 text-sm">Logout</p>
            </div>
        </div>
      ) : (
        <></>
      )}
      <Logo />
      <div className="flex items-center">
        <div>
          <button onClick={() => navigate('/matching')} className="font-bold text-putility-600">
            Start Matching!
          </button>
          <button className="font-bold text-putility-600 px-8">
            <a href="#how-to">Merry Membership</a>
          </button>
        </div>
        <div>
          <button>{notiButton}</button>
          <button onClick={() => setClicked(!clicked)}>
            {!isLoading ? (
              <div className="ml-2">
                <img className="w-12 rounded-full" src={user} alt={user} />
              </div>
            ) : (
              <div className="spinner"></div>
            )}
          </button>
        </div>
      </div>
    </div>
  );
};

export default Navbar;
